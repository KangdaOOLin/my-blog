# Git çš„å­¦ä¸è®°ï¼šä¿®æ”¹æäº¤è®°å½•çš„ç”¨æˆ·åå’Œé‚®ç®±

> ä½¿ç”¨ç‰ˆæœ¬è¯´æ˜ï¼š
>
> - git: 2.19.0

---

ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„ä¸€ä¸ªåœºæ™¯ï¼šåœ¨ä½¿ç”¨ `git commit` å‘½ä»¤å‰å¿˜è®°è®¾ç½® `user.name` å’Œ `user.email` äº†ï¼Œå¯¼è‡´æ­¤æ—¶çš„ç”¨æˆ·åå’Œé‚®ç®±å¹¶ä¸æ­£ç¡®ï¼Œå¯¹äºå¼ºè¿«ç—‡æ¥è¯´ç‰¹åˆ«çš„ä¸çˆ½ï¼ï¼ï¼

æ­¤æ—¶ï¼Œé€šå¸¸é‡åˆ°è¿™æ ·åœºæ™¯çš„è¯ï¼Œgit ä¼šå¾ˆè´´å¿ƒçš„æç¤ºä½ æ²¡æœ‰è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå¹¶ç»™å‡ºå¦‚ä¸‹æç¤ºï¼š

```shell
Committer: WenKang Lin <wenkang.lin@WenKangdeMacBook-Pro.local>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly:

    git config --global user.name "Your Name"
    git config --global user.email you@example.com

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author
```

è¿™é‡Œï¼Œgit ç»™å‡ºçš„ç­”æ¡ˆï¼Œé¦–å…ˆé€šè¿‡ `git config` è®¾ç½®ä½ çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥ä¿®æ”¹æœ€è¿‘ä¸€æ¡ï¼ˆlast commitï¼‰è®°å½•çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼š

```shell
git commit --amend --reset-author
```

æ‰§è¡Œåï¼Œä½ å¯ä»¥é€šè¿‡ `git log` å‘½ä»¤æ¥æŸ¥çœ‹è¢«ä½ çº æ­£çš„ç”¨æˆ·åå’Œé‚®ç®±å•¦~~

å—¯å—¯å—¯ã€‚ã€‚ã€‚ä½†è¿™è·Ÿ `git rebase` æœ‰å•¥å­å…³ç³»ï¼ŸğŸ¤”

é—®é¢˜åœ¨äºä¸Šé¢çš„å‘½ä»¤**åªèƒ½ä¿®æ”¹æœ€è¿‘ä¸€æ¡**ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹æœ€è¿‘ n æ¡ï¼Œé‚£åº”è¯¥å’‹æ•´å‘¢ï¼Ÿè¿™æ—¶å€™å°±åº”è¯¥ä½¿ç”¨ `git rebase -i` å‘½ä»¤äº†ï¼š

```shell
git rebase -i <commit-id> -x "git commit --amend --reset-author -CHEAD --no-edit"
```

æ„æ€æ˜¯ï¼šä¿®æ”¹ä» `<commit-id>` ä¹‹åçš„ä¸‹ä¸€æ¡è®°å½•åˆ°ç°åœ¨ï¼Œæ‰€æœ‰çš„æäº¤è®°å½•çš„ç”¨æˆ·åå’Œé‚®ç®±ã€‚è¿™é‡Œç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸ä¼šåŒ…æ‹¬ `<commit-id>` æœ¬èº«æäº¤è®°å½•ã€‚å¯èƒ½æœ‰ç‚¹æ‡µé€¼ï¼Œä½†æ²¡å…³ç³»ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾æ‰€æœ‰æäº¤è®°å½•å¦‚ä¸‹ï¼š

```shell
A - B - C - D - E - F
```

è¿™é‡Œ A æ˜¯ç¬¬ä¸€æ¡è®°å½•ï¼ŒF æ˜¯æœ€è¿‘ä¸€æ¡è®°å½•ã€‚å¦‚æœä½ æƒ³è¦ä¿®æ”¹ `B - F` çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```git
git rebase -i A -x "git commit --amend --reset-author -CHEAD --no-edit"
```

ä¸Šé¢çš„å‘½ä»¤ä¸åŒ…æ‹¬ A çš„æäº¤è®°å½•ï¼Œå¦‚æœæƒ³åŒ…å« A çš„è¯ï¼Œåˆåº”è¯¥å’‹æ•´ï¼Ÿå› ä¸º A æ˜¯ç¬¬ä¸€æ¡æäº¤è®°å½•äº†ï¼Œæ²¡æœ‰å®ƒçš„ä¸Šä¸€æ¡æ¥è®©æˆ‘ä»¬æ“ä½œäº†ã€‚ã€‚ã€‚

è¿™æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `--root` æ¥ä»£æ›¿ `<commit-id>`ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```git
git rebase -i --root -x "git commit --amend --reset-author -CHEAD --no-edit"
```

ä¸Šé¢çš„ `<commit-id>` æ—¢å¯ä»¥æ˜¯ä»»æ„ä¸€ä¸ªæäº¤è®°å½•çš„ SHAï¼Œä¹Ÿå¯ä»¥æ˜¯ `HEAD~n`ï¼Œä¾‹å¦‚ï¼š

```git
git rebase -i HEAD~4 -x "git commit --amend --reset-author -CHEAD --no-edit"
```

æœ€åå·å·çš„å‘Šè¯‰ä½ ï¼Œå¯ä»¥æ‰‹åŠ¨è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œæ„å‘³ç€ä½ å¹¶ä¸éœ€è¦ `git config` æå‰å»è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```git
git rebase -i <commit-id> -x "git commit --amend --author 'You Name <you@example.com>' -CHEAD --no-edit"
```

èªæ˜çš„ä½ ä¸€å®šå‘ç°äº†ï¼Œä¸Šé¢çš„å‘½ä»¤ä½¿ç”¨äº† `--author` å‚æ•°æ›¿ä»£äº† `--reset-author`ï¼Œé…±ç´«ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰‹åŠ¨è®¾ç½®äº†ã€‚

Doneï¼ï¼ï¼å¼ºè¿«ç—‡æ‚£è€…å¯ä»¥å®‰å¿ƒäº† O(âˆ©_âˆ©)O å“ˆå“ˆ~

> :question: -CHEAD å’Œ --no-edit å…·ä½“å•¥ä½œç”¨ï¼Œæœ¬äººä¸å¤ªæ¸…æ¥šï¼Œçƒ¦è¯·å‘ŠçŸ¥ :pray:
